{"pageProps":{"article":{"content":"\r\n# Amplify\r\n\r\nAWS Amplify is a set of services accompanied by various tools and libraries created to help the\r\ndevelopment of apps. Their suite offers among other features, an authentication feature, which can\r\nbe used as a stand-alone authentication system. The project is able to be used with this\r\nauthentication system, as well. Should you want to implement any of the other features Amplify\r\noffers, you can refer to their [documentation](https://docs.amplify.aws/).\r\n\r\n## Set up your Amplify account\r\n\r\nThe documentation for this, can be found in the official documentation of the service, mentioned\r\nabove.\r\n\r\n## Configuration\r\n\r\nIn order to configure Amplify client library you have to open (or create) `.env` file in the\r\nproject's root folder and set the following variables as presented in your Amplify account settings:\r\n\r\n```shell\r\nNEXT_PUBLIC_AWS_COGNITO_IDENTITY_POOL_ID=\r\nNEXT_PUBLIC_AWS_COGNITO_REGION=\r\nNEXT_PUBLIC_AWS_PROJECT_REGION=\r\nNEXT_PUBLIC_AWS_USER_POOLS_ID=\r\nNEXT_PUBLIC_AWS_USER_POOLS_WEB_CLIENT_ID=\r\n```\r\n\r\nIf you do not want to set up environment variables, settings can be applied simply on\r\nthe `amplifyConfig` object found in the `src/config.js` file.\r\n\r\n```js\r\nexport const amplifyConfig = {\r\n  aws_project_region: '',\r\n  aws_cognito_identity_pool_id: '',\r\n  aws_cognito_region: '',\r\n  aws_user_pools_id: '',\r\n  aws_user_pools_web_client_id: ''\r\n};\r\n```\r\n\r\n## How it was implemented\r\n\r\nAs mentioned above, Amplify offers a set of components to help your development process, although\r\nthey're not used in the app.\r\n\r\nThe `Auth` singleton from the library is used to provide the authentication feature to a context (\r\nwhich wraps the content of the `App` component).\r\n\r\nThis aforementioned context is then used in the component tree to access the `Auth` public methods.\r\nIt provides the user authentication status and user profile, if available.\r\n\r\n## How to use Amplify Provider\r\n\r\nBy default, the project uses a mocked `JWT provider` (as in: it doesn't use an actual JWT based\r\nauthentication server). To make use of Amplify simply follow these steps:\r\n\r\n### Step 1. Replace the provider and consumer\r\n\r\nOpen `src/pages/_app.js` file and replace the following line:\r\n\r\n```js\r\nimport { AuthConsumer, AuthProvider } from '../contexts/jwt-context';\r\n```\r\n\r\nwith\r\n\r\n```js\r\nimport { AuthConsumer, AuthProvider } from '../contexts/amplify-context';\r\n```\r\n\r\n### Step 2. Replace the hook context\r\n\r\nOpen `src/hooks/use-auth.js` file and replace the following line:\r\n\r\n```js\r\nimport { AuthContext } from '../contexts/jwt-context';\r\n```\r\n\r\nwith\r\n\r\n```js\r\nimport { AuthContext } from '../contexts/amplify-context';\r\n```\r\n\r\n## How to use auth\r\n\r\n### Retrieve user profile\r\n\r\nIn the example below, you can find how it can be used in any component not just the `App`. Should\r\nyou want to use it in any other component, you'll have to import the `useAuth` hook and use it as\r\nneeded.\r\n\r\n```jsx\r\n// src/pages/index.js\r\nimport { useAuth } from '../hooks/use-auth';\r\n\r\nconst Home = () => {\r\n  const { user } = useAuth();\r\n\r\n  return (\r\n    <div>\r\n      Email: {user.email}\r\n    </div>\r\n  );\r\n};\r\n```\r\n\r\n### Auth methods / actions\r\n\r\n> For simplicity and space limitations, the code below is used only to exemplify, actual code can be found in the components.\r\n\r\n```jsx\r\n// src/pages/index.js\r\nimport { useAuth } from '../hooks/use-auth';\r\n\r\nconst Home = () => {\r\n  const { login } = useAuth();\r\n  \r\n  const handleLogin = () => {\r\n    // Email/username and password\r\n    login('demo@devias.io', 'Password123!');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={handleLogin}>\r\n        Login\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n```\r\n\r\n## Implemented flows\r\n\r\nCurrently, the app only covers the main flows:\r\n\r\n- Sign in\r\n- Sign up\r\n- Confirm sign up\r\n- Resend sign up\r\n- Forgot password\r\n- Forgot password submit\r\n- Logout\r\n","slug":"authentication-amplify","title":"Amplify"}},"__N_SSG":true}