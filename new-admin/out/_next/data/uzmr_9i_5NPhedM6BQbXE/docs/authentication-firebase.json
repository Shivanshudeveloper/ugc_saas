{"pageProps":{"article":{"content":"\r\n# Firebase\r\n\r\nFirebase is a complete set of solutions, from Analytics to Cloud Functions. In the app at hand, only\r\nthe authentication service is used, although you can decide to use more of their features. Please\r\nrefer to their [documentation](https://firebase.google.com/docs)\r\nas you deem necessary.\r\n\r\n## Set up your Firebase account\r\n\r\nThe documentation for this, can be found in the official documentation of the service, mentioned\r\nabove.\r\n\r\n## Configuration\r\n\r\nTo configure Firebase client library you have to open (or create) `.env` file in the project's root\r\nfolder and set the following variables as presented in your Firebase account settings:\r\n\r\n```shell\r\nNEXT_PUBLIC_FIREBASE_API_KEY=\r\nNEXT_PUBLIC_FIREBASE_APP_ID=\r\nNEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=\r\nNEXT_PUBLIC_FIREBASE_DATABASE_URL=\r\nNEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=\r\nNEXT_PUBLIC_FIREBASE_PROJECT_ID=\r\nNEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=\r\n```\r\n\r\nIf you do not want to set up environment variables, settings can be applied simply on\r\nthe `firebaseConfig` object found in the `src/config.js` file.\r\n\r\n```js\r\nexport const firebaseConfig = {\r\n  apiKey: \"\",\r\n  appId: \"\",\r\n  authDomain: \"\",\r\n  databaseURL: \"\",\r\n  messagingSenderId: \"\",\r\n  projectId: \"\",\r\n  storageBucket: \"\",\r\n};\r\n```\r\n\r\n## How it was implemented\r\n\r\nAs mentioned above, Firebase offers a set of components to help your development process, although\r\nthey're not used in the app.\r\n\r\nThe `firebase.auth` factory from the library is used to create and provide the authentication\r\nfeature to a context (which wraps the content of the `App` component).\r\n\r\nThis aforementioned context is then used in the component tree to access the `Auth` public methods.\r\nIt provides the user authentication status and user profile, if available.\r\n\r\n## How to use Firebase Auth Provider\r\n\r\nBy default, the project uses a mocked `JWT provider` (as in: it doesn't use an actual JWT based\r\nauthentication server). To make use of Amplify simply follow these steps:\r\n\r\n### Step 1. Replace the provider\r\n\r\nOpen `src/pages/_app.js` file and replace the following line:\r\n\r\n```js\r\nimport { AuthConsumer, AuthProvider } from \"../contexts/jwt-context\";\r\n```\r\n\r\nwith\r\n\r\n```js\r\nimport { AuthConsumer, AuthProvider } from \"../contexts/firebase-auth-context\";\r\n```\r\n\r\n### Step 2. Replace the hook context\r\n\r\nOpen `src/hooks/use-auth.js` file and replace the following line:\r\n\r\n```js\r\nimport { AuthContext } from \"../contexts/jwt-context\";\r\n```\r\n\r\nwith\r\n\r\n```js\r\nimport { AuthContext } from \"../contexts/firebase-auth-context\";\r\n```\r\n\r\n## How to use auth\r\n\r\n### Retrieve user profile\r\n\r\nIn the example below, you can find how it can be used in any component not just the `App`. Should\r\nyou want to use it in any other component, you'll have to import the `useAuth` hook and use it as\r\nneeded.\r\n\r\n```jsx\r\n// src/pages/index.js\r\nimport { useAuth } from \"../hooks/use-auth\";\r\n\r\nconst Home = () => {\r\n  const { user } = useAuth();\r\n\r\n  return <div>Email: {user.email}</div>;\r\n};\r\n```\r\n\r\n### Auth methods / actions\r\n\r\n> For simplicity and space limitations, the code below is used only to exemplify, actual code can be found in the components.\r\n\r\n```jsx\r\n// src/pages/index.js\r\nimport { useAuth } from \"../hooks/use-auth\";\r\n\r\nconst Home = () => {\r\n  const { signInWithEmailAndPassword } = useAuth();\r\n\r\n  const handleLogin = () => {\r\n    // Email and password\r\n    signInWithEmailAndPassword(\"demo@devias.io\", \"Password123!\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={handleLogin}>Login</button>\r\n    </div>\r\n  );\r\n};\r\n```\r\n\r\n## Implemented flows\r\n\r\nCurrently, the app only covers the main flows:\r\n\r\n- Create user with email and password\r\n- Sign in with email and password\r\n- Sign in with popup (Google)\r\n- Logout\r\n","slug":"authentication-firebase","title":"Firebase"}},"__N_SSG":true}